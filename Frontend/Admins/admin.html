<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SMC Sports - Admin Panel</title>
        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script>
    </head>

    <body>
        <div class="sidebar">
            <h2>Menu</h2>
            <div class="sidebar-item active" onclick="switchSection('terms')">Terms</div>
            <div class="sidebar-item" onclick="switchSection('system')">System Status</div>
            <div class="sidebar-item" onclick="switchSection('sports')">Sports</div>
            <div class="sidebar-item" onclick="switchSection('students')">Students by Year</div>
            <div class="sidebar-item" onclick="switchSection('registrations')">Registrations</div>
            <div class="sidebar-item" onclick="switchSection('waitlist')">Waitlist</div>
            <div class="sidebar-item" onclick="switchSection('export')">Export & Delete</div>
        </div>

        <div class="content">
            <h1>SMC Sports Admin Panel</h1>

            <div id="terms" class="section active">
                <h2>Term Management</h2>
                <label>Select Term: 
                    <select id="termSelect" onchange="switchTerm()">
                        <option value="">Loading...</option>
                    </select>
                </label>
                
                <h3>Create New Term</h3>
                <input type="text" id="termName" placeholder="e.g., Term 1">
                <input type="number" id="termYear" placeholder="Year (e.g., 2025)" min="2020" max="2100">
                <button class="btn-success" onclick="createTerm()">Create Term</button>
                <p id="termMessage" class="message"></p>
            </div>

            <div id="system" class="section">
                <h2>System Status</h2>
                <p><strong>Status: </strong><span id="statusText" class="status-closed">CLOSED</span></p>
                <p><strong>Schedule: </strong><span id="scheduleText">/</span></p>
                
                <h3>Schedule Open Date & Time</h3>
                <label>Date: <input type="date" id="openDate"></label>
                <label>Time: <input type="time" id="openTime"></label>
                <button class="btn-primary" onclick="scheduleOpen()">Schedule Open</button>
                
                <h3>Manual Control</h3>
                <button class="btn-success" onclick="openNow()">Open Now</button>
                <button class="btn-danger" onclick="closeNow()">Close Now</button>
                <button class="btn-warning" onclick="clearSchedule()">Clear Schedule</button>
                
                <p id="systemMessage" class="message"></p>
            </div>

            <div id="sports" class="section">
                <h2>Sports Management</h2>
                <div id="sportsList"></div>
                
                <h3>Add New Sport</h3>
                <input type="text" id="newSportName" placeholder="Sport name">
                <textarea id="newSportDescription" placeholder="Sport description (optional)"></textarea>
                <input type="number" id="newSportCapacity" placeholder="Capacity" min="1" value="20">
                <button class="btn-success" onclick="addSport()">Add Sport</button>
            </div>

            <div id="students" class="section">
                <h2>Students</h2>
                <label>Select Term: 
                    <select id="filterTermSelect" onchange="applyStudentFilters()">
                        <option value="">Loading...</option>
                    </select>
                </label>
                <label>Select Year: 
                    <select id="filterYearSelect" onchange="applyStudentFilters()">
                        <option value="">All Years</option>
                        <option value="7">Year 7</option>
                        <option value="8">Year 8</option>
                        <option value="9">Year 9</option>
                        <option value="10">Year 10</option>
                    </select>
                </label>
                <label>Select Sport: 
                    <select id="filterSportSelect" onchange="applyStudentFilters()">
                        <option value="">All Sports</option>
                    </select>
                </label>
                <table style="width: 100%; margin-top: 20px; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #ecf0f1; border-bottom: 2px solid #3498db;">
                            <th style="padding: 10px; text-align: left;">Name</th>
                            <th style="padding: 10px; text-align: left;">Email</th>
                            <th style="padding: 10px; text-align: left;">Phone</th>
                            <th style="padding: 10px; text-align: left;">Year</th>
                            <th style="padding: 10px; text-align: left;">Sport</th>
                            <th style="padding: 10px; text-align: left;">Action</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <tr><td colspan="6" style="padding: 10px; text-align: center;">Loading...</td></tr>
                    </tbody>
                </table>
            </div>

            <div id="registrations" class="section">
                <h2>Registrations by Sport</h2>
                <div id="sportRegistrations"></div>
            </div>

            <div id="waitlist" class="section">
                <h2>Waitlist</h2>
                <div id="waitlistList"></div>
            </div>

            <div id="export" class="section">
                <h2>Export Data</h2>
                <label>Select Term to Export: 
                    <select id="exportTermSelect">
                        <option value="">Loading...</option>
                    </select>
                </label>
                <button class="btn-primary" onclick="exportToCSV()">Export to CSV</button>
                
                <h2 style="margin-top: 30px;">Delete All Students</h2>
                <button class="btn-danger" onclick="startDeleteAll()">Delete All Students</button>
                <div id="deletePrompt" style="display: none; margin-top: 15px; padding: 15px; background: #fff3cd; border-radius: 4px;">
                    <p>Type this code to confirm: <strong id="deleteCode" style="font-size: 18px;"></strong></p>
                    <input type="text" id="deleteCodeInput" placeholder="Enter code here">
                    <button class="btn-danger" onclick="confirmDeleteAll()">Confirm Delete</button>
                    <button class="btn-primary" onclick="cancelDeleteAll()">Cancel</button>
                </div>
            </div>
        </div>

        <div class="footer">
            Made and developed by Marcus Papasavvas
        </div>

        <script src="admin.js"></script>
    </body>
</html>